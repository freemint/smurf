/* * ***** BEGIN LICENSE BLOCK ***** * * The contents of this file are subject to the GNU General Public License * Version 2 (the "License"); you may not use this file except in compliance * with the GPL. You may obtain a copy of the License at * http://www.gnu.org/copyleft/gpl.html or the file GPL.TXT from the program * or source code package. * * Software distributed under the License is distributed on an "AS IS" basis, * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for * the specific language governing rights and limitations under the GPL. * * The Original Code is Therapy Seriouz Software code. * * The Initial Developer of the Original Code are * Olaf Piesche, Christian Eyrich, Dale Russell and J”rg Dittmer * * Contributor(s): * * * ***** END LICENSE BLOCK ***** *//************************************************************//* Routinen, die es erleichtern, ein Debugfile ausgeben zu	*//* lassen.													*//************************************************************/#include <tos.h>#include <ext.h>#include <stdio.h>#include <string.h>#include "debug.h"#define SCREEN 1void write_debug(char *message);void write_debug(char *message){	int file;	long dummy;	if(message == NULL)	{		dummy = Fcreate("debug.log", 0);		message = "Smurf Debug";	}	else		dummy = Fopen("debug.log", FO_WRITE);	if(dummy >= 0)	{		file = (int)dummy;		Fseek(0, file, 2);		Fwrite(file, strlen(message), message);		Fwrite(file, 2, "\r\n");		Fclose(file);	}		}void WriteDebugMsg( FILE *DebugHandle, char *Arg, va_list ap ){	char Puf[512];	vsprintf( Puf, Arg, ap);	if( DebugHandle )		fwrite( Puf, sizeof( char ), strlen( Puf ), DebugHandle );}void DebugMsg( char *Arg __c_va_alist ){#ifdef DEBUG	va_list	ap;	FILE *DebugHandle = NULL;		va_start( ap, Arg );	DebugHandle = fopen( "smurf.log", "a+" );	if( DebugHandle )		WriteDebugMsg( DebugHandle, Arg, ap );	if( DebugHandle )		fclose( DebugHandle );		va_end ( ap );#endif}